@page "/admin/logout"
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject NavigationManager NavigationManager
@inject ISnackbar Snackbar

<PageTitle>Cerrando Sesi贸n...</PageTitle>

<MudContainer MaxWidth="MaxWidth.Small" Class="mt-16">
    <MudPaper Elevation="4" Class="pa-8">
        <MudStack Spacing="4" AlignItems="AlignItems.Center">
            <MudProgressCircular Indeterminate="true" Size="Size.Large" Color="Color.Primary"/>
            <MudText Typo="Typo.h6">Cerrando sesi贸n...</MudText>
        </MudStack>
    </MudPaper>
</MudContainer>

@code {
    protected override async Task OnInitializedAsync()
    {
        try
        {
            await SignInManager.SignOutAsync();
            Snackbar.Add("Sesi贸n cerrada exitosamente", Severity.Success);
            NavigationManager.NavigateTo("/", forceLoad: true);
        }
        catch (Exception ex)
        {
            Snackbar.Add("Error al cerrar sesi贸n", Severity.Error);
            Console.WriteLine($"Error en logout: {ex.Message}");
            NavigationManager.NavigateTo("/");
        }
    }
}